version: 0.2

phases:
  install:
    commands:
      - pip install tox
    runtime-versions:
      python: latest
  pre_build:
    commands:
      - git clone https://github.com/aws-samples/busy-engineers-document-bucket.git
      - cd busy-engineers-document-bucket/exercises/python/encryption-context-complete
      - sed -i "s/aws_encryption_sdk/aws_encryption_sdk==$VERSION/" requirements-dev.txt
  build:
    commands:
      - tox -e test
